monetate.c.cr({"data": "// T37 - BAH Intersticial\n// 01/10/2019 Excluido buscador avanzado IBADVS\n// 03/10/2019 Cambio uk por gb en los validmarkets (PAB)\n\n(function() {\n  try {\n    var TESTNAME = \"T37 - BAH Intersticial\";\n    var LOG = localStorage.getItem(\"MONETATE_LOG\");\n\n    var t37 = {\n      scope: {}\n    };\n\n    t37.scope.RENDER_SELECTOR = \"body\";\n\n    t37.scope.strings = {\n      es: {\n        title: \"Te estamos transfiriendo a British Airways Holidays para buscar la mejor combinaci\u00f3n.\",\n        body: \"Lo bueno se hace esperar...\"\n      },\n      en: {\n        title: \"We are redirecting you to British Airways Holidays to find the best combination.\",\n        body: \"Good things are worth waiting for...\"\n      },\n      it: {\n        title: \"Ti stiamo trasferendo su British Airways Holidays per cercare la migliore combinazione.\",\n\t  body: \"Le cose belle si fanno attendere...\"\n      },\n      fr: {\n        title: \"Nous vous transf\u00e9rons vers British Airways Holidays afin que vous obteniez la meilleure combinaison.\",\n        body: \"Tout vient \u00e0 point \u00e0 qui sait attendre...\"\n      },\n      pt: {\n        title: \"Estamos a efetuar a sua transfer\u00eancia para a British Airways Holidays para pesquisar a melhor combina\u00e7\u00e3o.\",\n        body: \"Quem espera sempre alcan\u00e7a...\"\n      },\n      ca: {\n        title: \"T'estem transferint a British Airways Holidays per trobar la millor combinaci\u00f3.\",\n        body: \"El que \u00e9s bo es fa esperar...\"\n      },\n      de: {\n        title: \"Wir leiten Sie zu British Airways Holidays weiter, damit Sie die beste Kombination finden k\u00f6nnen.\",\n        body: \"Das Gute wartet auf Sie...\"\n      }\n    };\n\n    t37.scope.lang = \"\";\n    t37.scope.mercado = \"\";\n    t37.scope.validMarkets = [\"cl\", \"do\", \"sv\", \"gt\", \"mx\", \"pa\", \"pr\", \"us\", \"ma\", \"il\", \"at\", \"be\", \"hr\", \"cz\", \"dk\", \"fr\", \"de\", \"gr\", \"it\", \"mt\", \"nl\", \"pt\", \"ru\", \"es\", \"se\", \"ch\", \"ie\", \"gb\"];\n    t37.scope.searchBtnIds = [\"buttonSubmit2\", \"buttonSubmit3\"];\n\n    t37.scope.meetsConditions = true;\n\n    ////////////////////////////// functiones //////////////////////////\n\n    function init() {\n      log2tealeaf();\n      when({\n        condition: isDataLayerAndJQuery,\n        callback: function() {\n          //Variant preconditions\n          getLang()\n            .then(checkMarket)\n\n            //Variant\n            .then(attachSearchEvents);\n        }\n      });\n    } // end init()\n\n    // funcion DOM ready Condition\n    /////////////////////////////////\n\n    function isDataLayerAndJQuery() {\n      return window.jQuery && window.datalayer_general && window.datalayer_general.idioma && window.datalayer_general.mercado;\n    } // end isDataLayerAndJQuery\n\n    // funciones Variant conditions\n    ////////////////////////////////\n\n    function getLang() {\n      var dfd = $.Deferred();\n\n      t37.scope.lang = window.datalayer_general.idioma;\n\n      log2con(\"Idioma \" + t37.scope.lang);\n\n      dfd.resolve();\n\n      return dfd.promise();\n    }\n\n    function checkMarket() {\n      var dfd = $.Deferred();\n\n      t37.scope.mercado = window.datalayer_general.mercado.toLowerCase();\n\n      log2con(\"checkMarket: \" + t37.scope.mercado);\n\n      t37.scope.meetsConditions = t37.scope.meetsConditions && t37.scope.validMarkets.indexOf(t37.scope.mercado) >= 0;\n      if (t37.scope.meetsConditions) {\n        log2con(\"Cumple condici\u00f3n\");\n        dfd.resolve();\n      } else {\n        log2con(\"EXIT no cumple condici\u00f3n\");\n        dfd.reject();\n      }\n\n      return dfd.promise();\n    }\n\n    function attachSearchEvents() {\n      log2con(\"attachSearchEvents\");\n      document.addEventListener(\"click\", searchButtonCatch, true);\n    }\n\n    function searchButtonCatch(event) {\n      t37.scope.searchBtnIds.forEach(function(value, index, _arr) {\n        if (event.target.id === value || event.target.parentNode.id === value) {\n          log2con(\"click search button \" + value);\n\n          event.stopPropagation();\n          event.preventDefault();\n\n          if ($(\"#flight_origin\" + (index + 2)).val() != \"\" && $(\"#flight_destiny\" + (index + 2)).val() != \"\" && $(\"#flight_round_date\" + (index + 2)).val() != \"\" && $(\"#flight_return_date\" + (index + 2)).val() != \"\") {\n            log2con(\"flight_origin\" + (index + 2) + \": \" + $(\"#flight_origin\" + (index + 2)).val());\n            log2con(\"flight_destiny\" + (index + 2) + \": \" + $(\"#flight_destiny\" + (index + 2)).val());\n            log2con(\"flight_round_date\" + (index + 2) + \": \" + $(\"#flight_round_date\" + (index + 2)).val());\n            log2con(\"flight_return_date\" + (index + 2) + \": \" + $(\"#flight_return_date\" + (index + 2)).val());\n            renderVariant();\n          } else {\n            log2con(\"hay campos vacios\");\n          }\n\n          $(\"#\" + value).click();\n        }\n      });\n    }\n\n    // funcion Principal de la Variante del test\n    ////////////////////////////////////////////\n\n    function renderVariant() {\n      // lo que quieras hacer aqui!!!\n      log2con(\"Inicio del render\");\n\n      if (t37.scope.meetsConditions) {\n        t37.scope.output =\n          \"\" +\n          '<div id=\"mm-t37-bah\">' +\n          '<div class=\"ib-loading-container ib-loading-container--white\">' +\n          '<div class=\"ib-loading-circle\">' +\n          '<div class=\"ib-loading-circle__circle\">' +\n          '<div class=\"ib-loading-circle__airplane\">' +\n          '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 92.49 57.42\" class=\"ib-loading-circle__svg-one\"><defs><style>.cls-1{fill:#ffffff;}</style></defs><g id=\"Capa_2\" data-name=\"Capa 2\"><g id=\"Capa_2-2\" data-name=\"Capa 2\"><path class=\"cls-1\" d=\"M86.86,25l-1.11-.22a4.07,4.07,0,0,1-2.1-1.12l-3-2.94a7,7,0,0,0-5-2H55.09L46.09.79A1.44,1.44,0,0,0,44.8,0H37.57a1.44,1.44,0,0,0-1.44,1.44V18.66h-18L9.87,6.38a1.45,1.45,0,0,0-1.2-.64H1.45A1.45,1.45,0,0,0,0,7.18V28.71a1.46,1.46,0,0,0,1,1.38l28.9,8.61a1.52,1.52,0,0,0,.42.06h5.78V56a1.44,1.44,0,0,0,1.44,1.43H44.8a1.42,1.42,0,0,0,1.29-.79l9-17.87H85.48A7,7,0,0,0,86.86,25ZM39,2.87h4.89l7.94,15.79H39ZM7.9,8.61l6.74,10.05h-3.8l-7.59-10Zm-5,4.31,4.34,5.74H2.89Zm50,23.76-9,17.87H39v-23H55.47Zm32.58-.79H56.53l2.57-5.1a1.43,1.43,0,0,0-1.29-2.08H37.57a1.44,1.44,0,0,0-1.44,1.44v5.74H30.56L2.89,27.64V21.53H75.74a4.13,4.13,0,0,1,2.91,1.2l3,2.94a7,7,0,0,0,3.58,1.9l1.1.22a4.09,4.09,0,0,1-.81,8.1Z\"></path><rect class=\"cls-1\" x=\"18.24\" y=\"24.5\" width=\"3\" height=\"3\"></rect><rect class=\"cls-1\" x=\"23.44\" y=\"24.5\" width=\"3\" height=\"3\"></rect><rect class=\"cls-1\" x=\"28.64\" y=\"24.5\" width=\"3\" height=\"3\"></rect><rect class=\"cls-1\" x=\"33.84\" y=\"24.5\" width=\"3\" height=\"3\"></rect><rect class=\"cls-1\" x=\"39.04\" y=\"24.5\" width=\"3\" height=\"3\"></rect><rect class=\"cls-1\" x=\"44.24\" y=\"24.5\" width=\"3\" height=\"3\"></rect><rect class=\"cls-1\" x=\"49.44\" y=\"24.5\" width=\"3\" height=\"3\"></rect><rect class=\"cls-1\" x=\"54.64\" y=\"24.5\" width=\"3\" height=\"3\"></rect><rect class=\"cls-1\" x=\"59.84\" y=\"24.5\" width=\"3\" height=\"3\"></rect><rect class=\"cls-1\" x=\"65.04\" y=\"24.5\" width=\"3\" height=\"3\"></rect><rect class=\"cls-1\" x=\"70.24\" y=\"24.5\" width=\"3\" height=\"3\"></rect></g></g></svg>' +\n          \"</div>\" +\n          '<div class=\"ib-loading-circle__clouds\">' +\n          '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 55.18 28.98\" class=\"ib-loading-circle__svg-two\"><defs><style>.cls-1{fill:#ffffff;}</style></defs><g id=\"Capa_2\" data-name=\"Capa 2\"><g id=\"Capa_2-2\" data-name=\"Capa 2\"><path class=\"cls-1\" d=\"M25,2A11.56,11.56,0,0,1,36.59,12.79a.11.11,0,0,0,.06.09h.11l.12,0,8.63-.31h.1c4.35,0,7.53,2.89,7.57,6.9S50,26.58,45.67,26.62L11.36,27h-.11C6.1,27,2.05,23.2,2,18.33a9,9,0,0,1,9.17-9h0a4.83,4.83,0,0,1,1.3.25,4.5,4.5,0,0,0,1.31.27h0A.21.21,0,0,0,14,9.77,11.67,11.67,0,0,1,24.85,2H25m0-2h-.15A13.69,13.69,0,0,0,12.74,7.58a5.79,5.79,0,0,0-1.54-.24A11,11,0,0,0,0,18.35C.06,24.31,5,29,11.25,29h.13l34.31-.36c5.47-.06,9.55-4,9.49-9.21s-4.08-8.88-9.57-8.88h-.12l-7.15.26A13.62,13.62,0,0,0,25,0Z\"></path></g></g></svg>' +\n          '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 42.58 26.43\" class=\"ib-loading-circle__svg-three\"><defs><style>.cls-1{fill:#ffffff;}</style></defs><g id=\"Capa_2\" data-name=\"Capa 2\"><g id=\"Capa_2-2\" data-name=\"Capa 2\"><path class=\"cls-1\" d=\"M15.91,2a8.22,8.22,0,0,1,7.7,5.28l.6,1.52,1.34-.94a3.92,3.92,0,0,1,6.19,3.22.68.68,0,0,1,0,.14l0,.23-.13,1.4h3.88A5.15,5.15,0,0,1,40.58,18v1.28a5.15,5.15,0,0,1-5.14,5.15H7.14A5.15,5.15,0,0,1,2,19.28V18a5.13,5.13,0,0,1,4.59-5.09l1.32-.14-.19-1.32a8.77,8.77,0,0,1-.09-1.17A8.28,8.28,0,0,1,15.91,2m0-2A10.29,10.29,0,0,0,5.63,10.28c0,.24,0,.49,0,.76A7.12,7.12,0,0,0,0,18v1.28a7.15,7.15,0,0,0,7.14,7.15h28.3a7.15,7.15,0,0,0,7.14-7.15V18a7.15,7.15,0,0,0-7.14-7.15H33.73A5.94,5.94,0,0,0,27.8,5.14a5.83,5.83,0,0,0-2.66.64A10.19,10.19,0,0,0,15.91,0Z\"></path></g></g></svg>' +\n          '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 55.18 28.98\" class=\"ib-loading-circle__svg-four\"><defs><style>.cls-1{fill:#ffffff;}</style></defs><g id=\"Capa_2\" data-name=\"Capa 2\"><g id=\"Capa_2-2\" data-name=\"Capa 2\"><path class=\"cls-1\" d=\"M25,2A11.56,11.56,0,0,1,36.59,12.79a.11.11,0,0,0,.06.09h.11l.12,0,8.63-.31h.1c4.35,0,7.53,2.89,7.57,6.9S50,26.58,45.67,26.62L11.36,27h-.11C6.1,27,2.05,23.2,2,18.33a9,9,0,0,1,9.17-9h0a4.83,4.83,0,0,1,1.3.25,4.5,4.5,0,0,0,1.31.27h0A.21.21,0,0,0,14,9.77,11.67,11.67,0,0,1,24.85,2H25m0-2h-.15A13.69,13.69,0,0,0,12.74,7.58a5.79,5.79,0,0,0-1.54-.24A11,11,0,0,0,0,18.35C.06,24.31,5,29,11.25,29h.13l34.31-.36c5.47-.06,9.55-4,9.49-9.21s-4.08-8.88-9.57-8.88h-.12l-7.15.26A13.62,13.62,0,0,0,25,0Z\"></path></g></g></svg>' +\n          '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 42.58 26.43\" class=\"ib-loading-circle__svg-five\"><defs><style>.cls-1{fill:#ffffff;}</style></defs><g id=\"Capa_2\" data-name=\"Capa 2\"><g id=\"Capa_2-2\" data-name=\"Capa 2\"><path class=\"cls-1\" d=\"M15.91,2a8.22,8.22,0,0,1,7.7,5.28l.6,1.52,1.34-.94a3.92,3.92,0,0,1,6.19,3.22.68.68,0,0,1,0,.14l0,.23-.13,1.4h3.88A5.15,5.15,0,0,1,40.58,18v1.28a5.15,5.15,0,0,1-5.14,5.15H7.14A5.15,5.15,0,0,1,2,19.28V18a5.13,5.13,0,0,1,4.59-5.09l1.32-.14-.19-1.32a8.77,8.77,0,0,1-.09-1.17A8.28,8.28,0,0,1,15.91,2m0-2A10.29,10.29,0,0,0,5.63,10.28c0,.24,0,.49,0,.76A7.12,7.12,0,0,0,0,18v1.28a7.15,7.15,0,0,0,7.14,7.15h28.3a7.15,7.15,0,0,0,7.14-7.15V18a7.15,7.15,0,0,0-7.14-7.15H33.73A5.94,5.94,0,0,0,27.8,5.14a5.83,5.83,0,0,0-2.66.64A10.19,10.19,0,0,0,15.91,0Z\"></path></g></g></svg>' +\n          \"</div>\" +\n          \"</div>\" +\n          \"</div>\" +\n          '<div class=\"ib-loading-container__content\">' +\n          '<p class=\"ib-loading-container__txt ib-loading-container__txt--medium\">' +\n          t37.scope.strings[t37.scope.lang].title +\n          \"</p>\" +\n          '<p class=\"ib-loading-container__txt\">' +\n          t37.scope.strings[t37.scope.lang].body +\n          \"</p>\" +\n          \"</div>\" +\n          \"</div>\" +\n          \"</div>\";\n\n        document.querySelector(t37.scope.RENDER_SELECTOR).insertAdjacentHTML(\"afterbegin\", t37.scope.output);\n      } else {\n      }\n\n      log2con(\"Fin del render\");\n    }\n\n    /// utilities\n    ///////////////////////////////\n\n    function log2tealeaf() {\n      var output_tealeaf = \"<!-- Tealeaf log: [\" + TESTNAME + \"] -->\";\n      document.querySelector(\"body\").insertAdjacentHTML(\"beforeend\", output_tealeaf);\n    }\n\n    function log2con(aviso, criticidad) {\n      if (LOG != \"\") {\n        var timestamp = new Date().toTimeString();\n        aviso = timestamp + \" - [\" + TESTNAME + \"] - \" + aviso;\n\n        if (typeof criticidad === \"undefined\") criticidad = \"info\";\n\n        switch (LOG) {\n          case \"error\":\n            switch (criticidad) {\n              case \"error\":\n                console.error(aviso);\n                break;\n            }\n            break;\n          case \"warning\":\n            switch (criticidad) {\n              case \"error\":\n                console.error(aviso);\n                break;\n              case \"warning\":\n                console.warn(aviso);\n                break;\n            }\n            break;\n          case \"info\":\n            switch (criticidad) {\n              case \"error\":\n                console.error(aviso);\n                break;\n              case \"warning\":\n                console.warn(aviso);\n                break;\n              case \"info\":\n                console.info(aviso);\n                break;\n            }\n            break;\n          case \"debug\":\n            switch (criticidad) {\n              case \"error\":\n                console.error(aviso);\n                break;\n              case \"warning\":\n                console.warn(aviso);\n                break;\n              case \"info\":\n                console.info(aviso);\n                break;\n              case \"debug\":\n                console.debug(aviso);\n                break;\n            }\n            break;\n        }\n      }\n    } // end log2con()\n\n    function when(options) {\n      var trueFn = function() {\n        return true;\n      };\n      var falseFn = function() {\n        return false;\n      };\n      var condition = options.condition || trueFn;\n      var callback = options.callback || trueFn;\n      var stopCondition = options.stopCondition || falseFn;\n      var stopCallback = options.stopCallback || trueFn;\n\n      if (!stopCondition) {\n        setTimeout(function() {\n          stopCondition = trueFn;\n          stopCallback();\n        }, 5000);\n      }\n\n      (function wait() {\n        if (stopCondition()) {\n          stopCallback();\n        } else if (condition()) {\n          callback();\n        } else {\n          setTimeout(wait, 50);\n        }\n      })();\n    } // end when()\n\n    init();\n  } catch (err) {\n    log2con(\"ErrorName: \" + err.name, err);\n    log2con(\"ErrorDescription: \" + err.message, err);\n  }\n})();\n", "ref": "1123/4779875.js"});